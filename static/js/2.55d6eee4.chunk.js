(this["webpackJsonpfin-project-front"]=this["webpackJsonpfin-project-front"]||[]).push([[2],{128:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return c}));var n={};a.r(n),a.d(n,"fetchTransactions",(function(){return j})),a.d(n,"addTransaction",(function(){return b})),a.d(n,"getQueryStatistics",(function(){return h})),a.d(n,"getCategories",(function(){return m}));var c={};a.r(c),a.d(c,"getAllTransactions",(function(){return p})),a.d(c,"getAddTransactions",(function(){return f})),a.d(c,"getAllQueryStatistics",(function(){return x})),a.d(c,"getIsModalAddTransactionOpen",(function(){return v})),a.d(c,"getTransactionCategories",(function(){return O})),a.d(c,"getCurrentBalance",(function(){return g}));var s=a(20),i=a(32),r=a.n(i),o=a(37),l=a(18),d=a.n(l),u=a(42),j=(a(55),function(){return function(){var e=Object(o.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Object(s.f)()),e.prev=1,e.next=4,d.a.get("/transactions");case 4:a=e.sent,n=a.data,t(Object(s.g)(n.data.transactions)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t(Object(s.e)(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()}),b=function(e){return function(){var t=Object(o.a)(r.a.mark((function t(a){var n,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(Object(s.b)()),t.prev=1,t.next=4,d.a.post("/transactions",e);case 4:n=t.sent,c=n.data,a(Object(s.c)(c.data.result)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),a(Object(s.a)(t.t0.message)),u.b.error(" \u041d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u0441\u0440\u0435\u0434\u0441\u0442\u0432 \u043d\u0430 \u0441\u0447\u0435\u0442\u0443",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"});case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},h=function(e){var t=e.month,a=e.year;return function(){var e=Object(o.a)(r.a.mark((function e(n){var c,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(Object(s.i)()),e.prev=1,e.next=4,d.a.get("/transactions/statistics?month=".concat(t,"&year=").concat(a));case 4:c=e.sent,i=c.data,n(Object(s.j)(i)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(Object(s.h)(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},m=function(){return function(){var e=Object(o.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Object(s.l)()),e.prev=1,e.next=4,d.a.get("/transactions/categories");case 4:a=e.sent,n=a.data,t(Object(s.m)(n.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t(Object(s.k)(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},p=(a(40),function(e){return e.transactions.allTransactions}),f=function(e){return e.transactions.addTransactions},x=function(e){return e.transactions.queryStatistics},v=function(e){return e.transactions.modalTransaction},O=function(e){return e.transactions.transactionCategories},g=function(e){return e.transactions.allTransactions[0].balance}},141:function(e,t,a){"use strict";a(0);var n=a(14),c=a(15),s=(a(128),a(163)),i=a.n(s),r=a(3);t.a=function(){var e=Object(n.c)(c.c.getBalance);return Object(r.jsxs)("div",{className:i.a.wrapper,children:[Object(r.jsx)("h2",{className:i.a.title,children:"\u0412\u0430\u0448 \u0431\u0430\u043b\u0430\u043d\u0441"}),Object(r.jsxs)("p",{className:i.a.txt,children:[Object(r.jsx)("span",{className:i.a.badge,children:"\u20b4"}),e]})]})}},151:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(23),c=a.p+"static/media/icons.317bdcaa.svg",s=a(3),i=function(e){var t=e.name,a=e.size,n=e.className,i=e.color;return Object(s.jsx)("svg",{className:"icon icon-".concat(t," ").concat(n),fill:i,stroke:i,width:a,height:a,children:Object(s.jsx)("use",{xlinkHref:"".concat(c,"#icon-").concat(t)})})},r=a(162),o=a.n(r),l=function(){return Object(s.jsx)("div",{className:o.a.navigation_container,children:Object(s.jsxs)("nav",{className:o.a.navigation_nav_link,children:[Object(s.jsxs)(n.c,{to:"/fin-project-front/home",className:o.a.navigation_link,activeClassName:o.a.active_link,children:[Object(s.jsx)(i,{name:"home",className:o.a.navigation_home_icon}),Object(s.jsx)("p",{className:o.a.navigation_page_home,children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})]}),Object(s.jsxs)(n.c,{to:"/fin-project-front/statistics",className:o.a.navigation_link,activeClassName:o.a.active_link,children:[Object(s.jsx)(i,{name:"statistic",className:o.a.navigation_stat_icon}),Object(s.jsx)("p",{className:o.a.navigation_page_stat,children:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430"})]}),Object(s.jsx)(n.c,{to:"/fin-project-front/currency",className:o.a.navigation_link,children:Object(s.jsx)(i,{name:"dollar",className:o.a.navigation_dollar_icon})})]})})}},152:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var n=a(0),c=a(23),s=(a(157),a(118)),i=(a(158),a(14)),r=a(15),o=a(21),l=a(36),d=(a(159),a(3)),u=document.querySelector("#modal-root");function j(e){var t=e.onClose,a=Object(i.b)(),c=Object(n.useCallback)((function(){a(l.a.logout())}),[a]);Object(n.useEffect)((function(){var e=function(e){"Escape"===e.code&&t()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[t]);var s=Object(n.useCallback)((function(e){e.currentTarget===e.target&&t()}),[t]);return Object(o.createPortal)(Object(d.jsx)("div",{className:"modal-backdrop",onClick:s,children:Object(d.jsxs)("div",{className:"modal-content",onClose:t,children:[Object(d.jsx)("span",{className:"logout-modal-text",children:"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u044b\u0439\u0442\u0438?"}),Object(d.jsxs)("div",{className:"modal-buttons",children:[Object(d.jsx)("button",{className:"logout-modalBtn",onClick:c,children:"\u0412\u044b\u0439\u0442\u0438"}),Object(d.jsx)("button",{className:"close-modalBtn",onClick:s,children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]})}),u)}function b(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(i.c)(r.c.getUserName),l=Object(n.useCallback)((function(){c(!0)})),u=Object(n.useCallback)((function(){c(!1)}));return Object(d.jsxs)("div",{className:"user-menu",children:[Object(d.jsx)("span",{className:"user-name",children:o}),Object(d.jsxs)("button",{className:"logout-button",type:"button",onClick:l,children:[Object(d.jsx)("svg",{className:"logout-icon",children:Object(d.jsx)("use",{href:"../../../../images/icons/logout-icon.svg"})}),Object(d.jsx)("span",{className:"exit-button-text",children:"\u0412\u044b\u0439\u0442\u0438"})]}),a?Object(d.jsx)(j,{onClose:u}):null]})}function h(){return Object(d.jsxs)("div",{className:"auth-bar",children:[Object(d.jsx)(c.b,{to:"/fin-project-front/home",className:"logo bar-logo"}),Object(d.jsx)(b,{})]})}},153:function(e,t,a){"use strict";var n=a(32),c=a.n(n),s=a(24),i=a(37),r=a(118),o=a(0),l=a(367),d=a(371),u=a(374),j=a(380),b=a(372),h=a(373),m=a(41),p=a.n(m),f=a(370),x=a.p+"static/media/vector.2c3a3c54.svg",v=a.p+"static/media/vector1.94d94956.svg",O=(a(160),a(3)),g=function(e){return Number.parseFloat(e).toFixed(2)};t.a=function(){var e=Object(o.useState)([]),t=Object(r.a)(e,2),a=t[0],n=t[1],m=Object(o.useState)(!1),_=Object(r.a)(m,2),N=_[0],w=_[1],k=Object(o.useState)(!1),C=Object(r.a)(k,2),y=C[0],S=C[1];Object(o.useEffect)((function(){A(),S(window.innerWidth>1279),B()}),[]);var A=function(){window.addEventListener("resize",(function(){S(window.innerWidth>1279)}))},B=function(){var e=Object(i.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.prev=1,e.next=4,fetch("https://api.privatbank.ua/p24api/pubinfo?json&exchange&coursid=5").then((function(e){return e.json()})).then((function(e){return e}));case 4:t=e.sent,a=t.filter((function(e){return"BTC"!==e.ccy})),n((function(e){return[].concat(Object(s.a)(e),Object(s.a)(a))})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("Smth wrong with search fetch",e.t0);case 12:return e.prev=12,w(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])})));return function(){return e.apply(this,arguments)}}(),F=Object(l.a)((function(e){return{root:{fontFamily:"Circe","border-top-left-radius":20,"border-top-right-radius":20,padding:0,"border-bottom-left-radius":20,"border-bottom-right-radius":20},table:{"@media (min-width: 320px) and (max-width:767px )":{width:280},"@media (min-width: 768px) and (max-width:1279px )":{width:334},"@media (min-width: 1280)":{width:348},"@media (min-width: 320px) and (max-width:1279px )":{backgroundImage:"url(".concat(v,")"),backgroundPosition:"bottom",backgroundRepeat:"no-repeat","border-bottom-left-radius":20,"border-bottom-right-radius":20},"text-align":"center",border:"none",background:"#4a56e2","border-top-left-radius":20,"border-top-right-radius":20,fontFamily:"Circe"},tableBody:{"@media (min-width: 320px) and (max-width:1279px )":{}},head:{"@media (min-width: 320px) and (max-width:1279px )":{height:50},"@media (min-width: 1280)":{height:60},"text-align":"center","border-bottom":"none",color:"#ffffff","font-size":"18px",fontFamily:"Circe","line-height":"27px"},headCell:{"font-weight":"bold","@media (min-width: 1280)":{padding:0},"@media (min-width: 320px) and (max-width:1279px )":{padding:0},"text-align":"center",color:"#ffffff","font-size":"18px",fontFamily:"Circe","border-bottom":"none","line-height":"27px",background:"#6e78e8"},row:{"@media (min-width: 1280)":{height:51}},cell:{padding:13,"text-align":"center",border:"none","@media (min-width: 320px) and (max-width:1279px )":{height:41,padding:0},"@media (min-width: 1280)":{height:51},fontFamily:"Circe",color:"#ffffff","font-weight":400,"font-size":"16px","line-height":"24px"},cellRadiusLeft:{"border-top-left-radius":20},cellRadiusRight:{"border-top-right-radius":20},vector:{background:"#4a56e2","border-bottom-left-radius":20,"border-bottom-right-radius":20}}}))();return Object(O.jsxs)("div",{children:[Object(O.jsx)(f.a,{className:F.root,children:Object(O.jsxs)(d.a,{className:F.table,children:[Object(O.jsx)(b.a,{className:F.head,children:Object(O.jsxs)(h.a,{children:[Object(O.jsx)(j.a,{className:F.headCell+" "+F.cellRadiusLeft,children:"\u0412\u0430\u043b\u044e\u0442\u0430"}),Object(O.jsx)(j.a,{className:F.headCell,children:"\u041f\u043e\u043a\u0443\u043f\u043a\u0430"}),Object(O.jsx)(j.a,{className:F.headCell+" "+F.cellRadiusRight,children:"\u041f\u0440\u043e\u0434\u0430\u0436\u0430"})]})}),Object(O.jsx)(u.a,{className:F.tableBody,children:a.map((function(e){return Object(O.jsxs)(h.a,{className:F.row,children:[Object(O.jsx)(j.a,{className:F.cell,children:e.ccy}),Object(O.jsx)(j.a,{className:F.cell,children:g(e.buy)}),Object(O.jsx)(j.a,{className:F.cell,children:g(e.sale)})]},e.ccy)}))})]})}),N&&Object(O.jsx)(p.a,{type:"ThreeDots",color:"#00BFFF",height:80,width:80}),y&&Object(O.jsxs)("div",{children:[" ",Object(O.jsx)("img",{src:x,className:F.vector,alt:"vector"})]})]})}},157:function(e,t,a){},158:function(e,t,a){},159:function(e,t,a){},160:function(e,t,a){},162:function(e,t,a){e.exports={navigation_link:"Navigation_navigation_link__2AaYf",navigation_container:"Navigation_navigation_container__2l-nP",navigation_nav_link:"Navigation_navigation_nav_link__1WBZo",navigation_home_icon:"Navigation_navigation_home_icon__1AE_A",navigation_stat_icon:"Navigation_navigation_stat_icon__1dqXB",navigation_dollar_icon:"Navigation_navigation_dollar_icon__2Zse7",navigation_page_home:"Navigation_navigation_page_home__2rySn",navigation_page_stat:"Navigation_navigation_page_stat__2iwgI",active_link:"Navigation_active_link__nCjyh"}},163:function(e,t,a){e.exports={wrapper:"Balance_wrapper__uQH9k",title:"Balance_title__1K3JV",txt:"Balance_txt__1IbAe",badge:"Balance_badge__3divu"}},209:function(e,t,a){"use strict";a.d(t,"a",(function(){return w}));var n=a(118),c=a(0),s=a(14),i=a(15),r=a(128),o=a(42),l=(a(55),a(3));function d(e){var t=e.errorMessage;return o.b.error("".concat(t)),Object(l.jsx)("div",{children:Object(l.jsx)(o.a,{draggable:!1,position:"top-right",closeButton:!0,closeOnClick:!0,autoClose:8e3,hideProgressBar:!1,newestOnTop:!1,pauseOnVisibilityChange:!0,pauseOnHover:!0})})}a(244);var u=a(357),j=(new Date).getFullYear(),b={colorSchema:["#FED057","#FFD8D0","#FD9498","#C5BAFF","#6E78E8","#4A56E2","#81E1FF","#24CCA7","#00AD84"],categoriesSchema:["\u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u0440\u0430\u0441\u0445\u043e\u0434\u044b","\u041f\u0440\u043e\u0434\u0443\u043a\u0442\u044b","\u041c\u0430\u0448\u0438\u043d\u0430","\u0417\u0430\u0431\u043e\u0442\u0430 \u043e \u0441\u0435\u0431\u0435","\u0417\u0430\u0431\u043e\u0442\u0430 \u043e \u0434\u0435\u0442\u044f\u0445","\u0422\u043e\u0432\u0430\u0440\u044b \u0434\u043b\u044f \u0434\u043e\u043c\u0430","\u041e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d\u0438\u0435","\u0414\u043e\u0441\u0443\u0433","\u0414\u0440\u0443\u0433\u0438\u0435 \u0440\u0430\u0441\u0445\u043e\u0434\u044b"],yearOptions:[0,-1,-2,-3].map((function(e){return String(e+j)})),monthOptions:["01","02","03","04","05","06","07","08","09","10","11","12"]};function h(e){var t=e.statistics,a=e.balance,n={datasets:[{data:t,backgroundColor:b.colorSchema,borderColor:b.colorSchema,borderWidth:1,hoverOffset:4,cutout:99}]};return Object(l.jsxs)("div",{className:"chart",children:[Object(l.jsx)(u.a,{className:"chart__contents",data:n}),Object(l.jsxs)("span",{className:"chart__ballance",children:["\u20b4 ",a]})]})}a(245);function m(e){var t=e.selected,a=e.setSelected,s=e.options,i=Object(c.useState)(!1),r=Object(n.a)(i,2),o=r[0],d=r[1];return Object(l.jsxs)("div",{className:"dropdown",children:[Object(l.jsxs)("div",{className:"dropdown-btn",onClick:function(e){d(!o)},children:[t,Object(l.jsx)("span",{className:"arrow-down"})]}),o&&Object(l.jsx)("div",{className:"dropdown-content",children:s.map((function(e){return Object(l.jsx)("div",{onClick:function(t){a(e),d(!1)},onBlur:function(e){d(!1)},className:"dropdown-item",children:e},e)}))})]})}a(246);function p(e){return Object(l.jsx)("div",{children:Object(l.jsxs)("div",{className:"table",children:[Object(l.jsxs)("div",{className:"table_select",children:[Object(l.jsx)("div",{className:"component_select_m",children:Object(l.jsx)(m,{selected:e.selectedMonth,setSelected:e.setSelectedMonth,options:b.monthOptions})}),Object(l.jsx)("div",{className:"component_select_y",children:Object(l.jsx)(m,{selected:e.selectedYear,setSelected:e.setSelectedYear,options:b.yearOptions})})]}),Object(l.jsxs)("div",{className:"statistics__menu",children:[Object(l.jsx)("span",{className:"statistics__list-title",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"}),Object(l.jsx)("span",{className:"statistics__list-title",children:"\u0421\u0443\u043c\u043c\u0430"})]}),Object(l.jsx)("ul",{className:"statistics list",children:e.statistics.expenseList.map((function(e,t){if(0!==e)return Object(l.jsxs)("li",{className:"statistics__list-item",children:[Object(l.jsx)("span",{className:"statistics__color",style:{backgroundColor:b.colorSchema[t]},children:" "}),Object(l.jsx)("div",{className:"statistics__category_wrap",children:Object(l.jsx)("span",{className:"statistics__category",children:b.categoriesSchema[t]})}),Object(l.jsx)("span",{className:"statistics__costs",children:e})]},t)}))}),Object(l.jsxs)("ul",{className:"outcome list",children:[Object(l.jsxs)("li",{className:"outcome__item",children:[Object(l.jsx)("span",{className:"outcome__type",children:"\u0420\u0430\u0441\u0445\u043e\u0434\u044b:"}),Object(l.jsx)("span",{className:"outcome__total outcome__total--expenses",children:e.statistics.expenseAll})]}),Object(l.jsxs)("li",{className:"outcome__item",children:[Object(l.jsx)("span",{className:"outcome__type",children:"\u0414\u043e\u0445\u043e\u0434\u044b:"}),Object(l.jsx)("span",{className:"outcome__total  outcome__total--income",children:e.statistics.income})]})]})]})})}a(247);var f=a(32),x=a.n(f),v=a(37),O=a(18),g=a.n(O);g.a.defaults.baseURL="https://fin-project-group4.herokuapp.com/api/";var _=function(){var e=Object(v.a)(x.a.mark((function e(t,a,n){var c,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g.a.defaults.headers.common.Authorization="".concat(n),e.next=4,g.a.get("transactions/statistics?month=".concat(Number(t),"&year=").concat(a));case 4:return c=e.sent,s=c.data,e.abrupt("return",s);case 9:throw e.prev=9,e.t0=e.catch(0),new Error("".concat(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a,n){return e.apply(this,arguments)}}(),N={fetchStatisticsAPI:_};function w(){var e={income:"-",expenseAll:"-",expenseCategory:{Basic:"-",Food:"-",Auto:"-",Development:"-",Children:"-",Home:"-",Education:"-",Others:"-"}},t=Object(s.c)(i.c.getBalance),a=Object(s.c)(r.b.getCurrentBalance);t=a||t;var o=Object(s.c)(i.c.getToken),u=Object(c.useState)(e),j=Object(n.a)(u,2),b=j[0],m=j[1],f=Object(c.useState)("\u041c\u0435\u0441\u044f\u0446"),x=Object(n.a)(f,2),v=x[0],O=x[1],g=Object(c.useState)("\u0413\u043e\u0434"),_=Object(n.a)(g,2),w=_[0],k=_[1],C=Object(c.useState)(null),y=Object(n.a)(C,2),S=y[0],A=y[1],B=Object(c.useState)(null),F=Object(n.a)(B,2),E=F[0],T=F[1];Object(c.useEffect)((function(){var e=v,t=w;e="\u041c\u0435\u0441\u044f\u0446"===e?11:v,t="\u0413\u043e\u0434"===t?2021:w,T(!0),N.fetchStatisticsAPI(e,t,o).then((function(e){if(!(null===e||void 0===e?void 0:e.data))throw new d("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445: ".concat(e," !"));m(null===e||void 0===e?void 0:e.data)})).catch((function(e){A(e)})).finally((function(){T(!1)}))}),[v,w,o]);var L=Object.values(null===b||void 0===b?void 0:b.expenseCategory),M=null===b||void 0===b?void 0:b.income,D={expenseList:L,expenseAll:null===b||void 0===b?void 0:b.expenseAll,income:M};if(!0===E){var R={expenseList:Object.values(e.expenseCategory),expenseAll:e.expenseAll,income:e.income};return Object(l.jsxs)("section",{className:"diagram",children:[Object(l.jsx)("h1",{className:"diagram__title",children:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430"}),Object(l.jsxs)("div",{className:"diagram__data",children:[R&&Object(l.jsx)(h,{statistics:R.expenseList,balance:t}),Object(l.jsx)(p,{selectedMonth:v,setSelectedMonth:O,selectedYear:w,setSelectedYear:k,statistics:R})]})]})}return Object(l.jsxs)("section",{className:"diagram",children:[Object(l.jsx)("h1",{className:"diagram__title",children:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430"}),Object(l.jsxs)("div",{className:"diagram__data",children:[D&&Object(l.jsx)(h,{statistics:D.expenseList,balance:t}),S&&Object(l.jsx)(d,{errorMessage:S.message}),Object(l.jsx)(p,{selectedMonth:v,setSelectedMonth:O,selectedYear:w,setSelectedYear:k,statistics:D})]})]})}},244:function(e,t,a){},245:function(e,t,a){},246:function(e,t,a){},247:function(e,t,a){}}]);
//# sourceMappingURL=2.55d6eee4.chunk.js.map